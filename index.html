<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>SUNY Niagara Petitions</title><meta name="description" content="SUNY Niagara Student Petitions — ThunderWolves platform to create and sign petitions. Official responses at 50 signatures."/><script src="https://cdn.tailwindcss.com"></script></head><body class="bg-slate-50 text-slate-900">
<header class="sticky top-0 z-30 bg-white/80 backdrop-blur border-b"><div class="max-w-5xl mx-auto px-4 py-3 flex justify-between items-center"><div class="flex items-center gap-2"><div class="w-9 h-9 rounded-xl grid place-items-center text-white text-sm font-bold bg-[#005587]">SGA</div><div><h1 class="font-extrabold">SUNY Niagara Petitions</h1><p class="text-xs opacity-70 -mt-0.5">ThunderWolves • Response at 50 signatures</p></div></div><nav class="flex gap-2 text-sm"><a href="#/" class="px-3 py-2 rounded-lg hover:bg-slate-100" data-nav="home">Home</a><a href="#/create" class="px-3 py-2 rounded-lg hover:bg-slate-100" data-nav="create">Start</a><a href="#/admin" class="px-3 py-2 rounded-lg hover:bg-slate-100" data-nav="admin">Admin</a><button id="btn-user" class="px-3 py-2 rounded-lg hover:bg-slate-100">Sign in</button></nav></div></header>
<main class="max-w-5xl mx-auto px-4 py-6 space-y-6">
<div id="toast" class="hidden text-sm border rounded-xl px-3 py-2"></div>
<section id="view-home" class="space-y-4"><div class="bg-white border rounded-xl p-4"><div class="flex flex-col md:flex-row md:items-end md:justify-between gap-3"><div><h2 class="text-2xl font-extrabold">Make a change</h2><p class="text-sm opacity-80">Create and sign student petitions. When a petition reaches <b>50 signatures</b>, SGA/advisor will provide an official response.</p></div><a href="#/create" class="inline-flex items-center justify-center px-4 py-2 rounded-lg text-white bg-[#005587]">Create petition</a></div><input id="home-q" class="mt-3 w-full px-3 py-2 rounded-lg border" placeholder="Search petitions..."/></div><div id="home-list" class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div></section>
<section id="view-create" class="hidden"><div class="bg-white border rounded-xl p-5 space-y-3"><h2 class="font-extrabold text-xl">Start a petition</h2><form id="create" class="grid gap-3"><input id="c-title" class="px-3 py-2 rounded-lg border" placeholder="Title" required/><select id="c-cat" class="px-3 py-2 rounded-lg border" required><option value="">Category</option><option>Academics</option><option>Student Life</option><option>Facilities</option><option>Policy</option><option>Dining</option><option>Parking</option></select><textarea id="c-desc" rows="5" class="px-3 py-2 rounded-lg border" placeholder="What do you want to change and why?" required></textarea><div class="flex gap-2"><button class="px-4 py-2 rounded-lg text-white bg-[#005587]" type="submit">Create</button><a href="#/" class="px-4 py-2 rounded-lg border">Cancel</a></div><p class="text-xs opacity-70">Goal is fixed at <b>50 signatures</b>. Only Admin can change it.</p></form></div></section>
<section id="view-detail" class="hidden"></section>
<section id="view-admin" class="hidden space-y-4"><div class="bg-white border rounded-xl p-4 flex items-center justify-between"><div><h2 class="font-extrabold">Admin Panel</h2><p class="text-xs opacity-70">Passcodes only (front-end demo)</p></div><div class="flex items-center gap-2"><span id="role-chip" class="px-2 py-1 text-xs rounded-full border">Role: guest</span><button id="admin-login" class="px-3 py-2 rounded-lg border">Log in</button><button id="admin-logout" class="px-3 py-2 rounded-lg border">Log out</button></div></div><div class="bg-white border rounded-xl p-4 overflow-x-auto"><table class="w-full text-sm" id="tbl"><thead class="text-left text-xs uppercase opacity-70"><tr><th class="py-2">Title</th><th>Category</th><th>Goal</th><th>Sigs</th><th>Status</th><th>Featured</th><th></th></tr></thead><tbody></tbody></table></div><div id="editor" class="hidden bg-white border rounded-xl p-4 grid gap-3"><h3 class="font-semibold">Edit Petition</h3><input id="e-title" class="px-3 py-2 rounded-lg border"/><select id="e-cat" class="px-3 py-2 rounded-lg border"><option>Academics</option><option>Student Life</option><option>Facilities</option><option>Policy</option><option>Dining</option><option>Parking</option></select><input id="e-goal" type="number" class="px-3 py-2 rounded-lg border"/><select id="e-status" class="px-3 py-2 rounded-lg border"><option value="active">Open</option><option value="archived">Archived</option></select><textarea id="e-desc" rows="5" class="px-3 py-2 rounded-lg border"></textarea><textarea id="e-resp" rows="3" class="px-3 py-2 rounded-lg border" placeholder="Official response (shown on petition)"></textarea><label class="text-sm flex items-center gap-2"><input id="e-featured" type="checkbox"/> Featured</label><div class="flex gap-2"><button id="e-save" class="px-3 py-2 rounded-lg text-white bg-[#005587]">Save</button><button id="e-view" class="px-3 py-2 rounded-lg border">View</button><button id="e-del" class="px-3 py-2 rounded-lg border text-red-600">Delete</button></div><p class="text-xs opacity-70">Only Admin can change goal. Others are locked to 50.</p></div><div class="bg-white border rounded-xl p-4 grid gap-2"><h3 class="font-semibold">Settings</h3><input id="s-domain" class="px-3 py-2 rounded-lg border" placeholder="Allowed domain (e.g. niagaracc.suny.edu)"/><label class="text-sm flex items-center gap-2"><input id="s-enforce" type="checkbox"/> Require this domain</label><label class="text-sm flex items-center gap-2"><input id="s-unique" type="checkbox" checked/> Block duplicate by email</label><div class="flex gap-2"><button id="s-save" class="px-3 py-2 rounded-lg text-white bg-[#005587]">Save settings</button><button id="s-reset" class="px-3 py-2 rounded-lg border">Reset</button></div></div></section>
</main>
<footer class="border-t bg-white"><div class="max-w-5xl mx-auto px-4 py-6 text-xs opacity-70 flex justify-between"><div>© <span id="year"></span> SUNY Niagara SGA</div><div class="flex gap-2"><a href="#/create" class="px-2 py-1 rounded-lg border">Start</a><a href="#/" class="px-2 py-1 rounded-lg border">Home</a></div></div></footer>
<template id="tpl"><article class="bg-white border rounded-xl p-4 flex flex-col gap-2"><div class="flex justify-between items-start gap-2"><h3 class="font-bold"></h3><span class="text-xs px-2 py-1 rounded-full border"></span></div><p class="text-sm line-clamp-3"></p><div class="w-full h-2 bg-slate-100 rounded-full overflow-hidden"><div class="bar h-2 bg-[#f0e253] rounded-full" style="width:0%"></div></div><div class="text-xs opacity-70 flex justify-between"><span><b class="sigs">0</b>/<b class="goal">0</b> signatures</span><span class="age"></span></div><div class="flex gap-2"><a class="view px-3 py-2 rounded-lg text-white bg-[#005587]">View & sign</a><button class="del px-3 py-2 rounded-lg border text-red-600">Delete</button></div></article></template>
<div id="m-user" class="hidden fixed inset-0 bg-black/40 items-center justify-center p-4"><div class="bg-white rounded-xl p-4 w-full max-w-sm grid gap-2"><h3 class="font-semibold">Sign in</h3><input id="u-name" class="px-3 py-2 rounded-lg border" placeholder="Full name"/><input id="u-email" class="px-3 py-2 rounded-lg border" type="email" placeholder="Email"/><label class="text-sm flex items-center gap-2"><input id="u-affil" type="checkbox"/> I’m a SUNY Niagara student</label><div class="flex gap-2 justify-end"><button id="u-cancel" class="px-3 py-2 rounded-lg border">Cancel</button><button id="u-save" class="px-3 py-2 rounded-lg text-white bg-[#005587]">Save</button></div></div></div>
<div id="m-admin" class="hidden fixed inset-0 bg-black/40 items-center justify-center p-4"><div class="bg-white rounded-xl p-4 w-full max-w-sm grid gap-2"><h3 class="font-semibold">Admin/Advisor Login</h3><select id="a-role" class="px-3 py-2 rounded-lg border"><option value="admin">Admin (SGA)</option><option value="advisor">Advisor</option></select><input id="a-code" class="px-3 py-2 rounded-lg border" type="password" placeholder="Passcode"/><div class="flex gap-2 justify-end"><button id="a-cancel" class="px-3 py-2 rounded-lg border">Cancel</button><button id="a-ok" class="px-3 py-2 rounded-lg text-white bg-[#005587]">Log in</button></div></div></div>
<script>const $=(s,r=document)=>r.querySelector(s),$$=(s,r=document)=>Array.from(r.querySelectorAll(s));const uid=()=>Math.random().toString(36).slice(2)+Date.now().toString(36);const ago=t=>{const s=((Date.now()-t)/1e3|0),m=s/60|0,h=m/60|0,d=h/24|0;return d?d+"d ago":h?h+"h ago":m?m+"m ago":"just now"};const K='nccc_petitions_v1',KR='nccc_role_v1',KU='nccc_user_v1',KS='nccc_settings_v1';const read=()=>JSON.parse(localStorage.getItem(K)||'[]'),write=v=>localStorage.setItem(K,JSON.stringify(v));const role=()=>localStorage.getItem(KR)||'guest',setRole=v=>localStorage.setItem(KR,v);const getUser=()=>JSON.parse(localStorage.getItem(KU)||'null'),setUser=u=>localStorage.setItem(KU,JSON.stringify(u));const getSet=()=>JSON.parse(localStorage.getItem(KS)||'{"domain":"","enforce":false,"uniq":true}'),setSet=s=>localStorage.setItem(KS,JSON.stringify(s));function toast(msg){const t=$('#toast');t.textContent=msg;t.className='text-sm border rounded-xl px-3 py-2 bg-white';setTimeout(()=>t.classList.add('hidden'),2200)}function seed(){if(read().length)return;const n=Date.now();write([{id:uid(),title:'Extend Library Hours During Finals',category:'Academics',description:'Extend library hours to 2am during finals; allow work-study staffing.',goal:50,createdAt:n-864e5*3,signatures:[{id:uid(),name:'Alex G.',email:'alex@example.com',comment:'Yes!',ts:n-72e5},{id:uid(),name:'Priya S.',email:'priya@example.com',comment:'',ts:n-36e5}],status:'active',featured:1,officialResponse:''},{id:uid(),title:'Winter Plowing & Parking Plan',category:'Parking',description:'Publish a plowing plan and overflow areas; add SMS alerts in storms.',goal:50,createdAt:n-864e5*7,signatures:[{id:uid(),name:'Jordan L.',email:'jordan@example.com',comment:'Please',ts:n-2e6}],status:'active',featured:0,officialResponse:''}])}function nav(){const h=location.hash.replace('#/','');if(!h){home();show('home');return}if(h.startsWith('create')){show('create');return}if(h.startsWith('petition/')){detail(h.split('/')[1]);return}if(h.startsWith('admin')){admin();return}home();show('home')}function show(v){['home','create','detail','admin'].forEach(x=>$('#view-'+x)?.classList.add('hidden'));$('#view-'+v)?.classList.remove('hidden');$$('a[data-nav]').forEach(a=>a.classList.toggle('bg-slate-100',a.getAttribute('data-nav')===v));const u=getUser();$('#btn-user').textContent=u?(u.name||u.email||'Profile'):'Sign in';window.scrollTo({top:0,behavior:'smooth'})}function card(p){const t=$('#tpl').content.cloneNode(true),c=t.querySelector('article');c.querySelector('h3').textContent=p.title;c.querySelector('span').textContent=p.category+(p.featured?' • Featured':'');c.querySelector('p').textContent=p.description;const pct=Math.min(100,Math.round((p.signatures.length/Math.max(1,p.goal))*100));c.querySelector('.goal').textContent=p.goal;c.querySelector('.sigs').textContent=p.signatures.length;c.querySelector('.age').textContent=ago(p.createdAt);c.querySelector('.bar').style.width=pct+'%';c.querySelector('.view').onclick=()=>location.hash='#/petition/'+p.id;const delBtn=c.querySelector('.del');const canDel=(role()==='admin'||role()==='advisor');if(!canDel){delBtn.remove();}else{delBtn.onclick=()=>{if(confirm('Delete this petition?')){write(read().filter(x=>x.id!==p.id));home();toast('Deleted')}}}return c}function home(){let rows=read(),q=$('#home-q')?.value?.toLowerCase()||'';if(q)rows=rows.filter(p=>(p.title+p.description+p.category).toLowerCase().includes(q));rows.sort((a,b)=>(b.signatures.length/b.goal)-(a.signatures.length/a.goal));const wrap=$('#home-list');wrap.innerHTML='';if(!rows.length){wrap.innerHTML='<div class="text-sm opacity-70">No petitions yet.</div>';return}rows.forEach(p=>wrap.appendChild(card(p)))}$('#home-q')?.addEventListener('input',home);$('#create')?.addEventListener('submit',e=>{e.preventDefault();const t=$('#c-title').value.trim(),d=$('#c-desc').value.trim(),c=$('#c-cat').value,g=50;if(!t||!d||!c)return toast('Fill all fields');const rows=read();const p={id:uid(),title:t,description:d,category:c,goal:g,createdAt:Date.now(),signatures:[],status:'active',featured:0,officialResponse:''};rows.unshift(p);write(rows);location.hash='#/petition/'+p.id;toast('Created')});function detail(id){const rows=read(),p=rows.find(x=>x.id===id);if(!p){toast('Not found');location.hash='#/';return}const s=getSet();const el=$('#view-detail');el.innerHTML=`<div class="bg-white border rounded-xl p-5 space-y-3"><div class="flex justify-between items-start"><div><div class="text-xs px-2 py-1 rounded-full border inline-block">${p.category}</div><h2 class="text-xl font-extrabold mt-1">${p.title}</h2><p class="text-xs opacity-70">${ago(p.createdAt)} • Goal ${p.goal} (response at 50)</p></div><button id="d-del" class="px-3 py-2 rounded-lg border text-red-600">Delete</button></div><p class="text-sm whitespace-pre-line">${p.description}</p>${p.officialResponse?`<div class=\"bg-yellow-50 border rounded-xl p-3 text-sm\"><b>Official Response</b><br>${p.officialResponse}</div>`:''}<div class="w-full h-2 bg-slate-100 rounded-full overflow-hidden"><div class="h-2 bg-[#f0e253] rounded-full" style="width:${Math.min(100,Math.round((p.signatures.length/Math.max(1,p.goal))*100))}%"></div></div><div class="text-sm opacity-80"><b>${p.signatures.length}</b> of <b>${p.goal}</b> signatures</div><form id="sign" class="grid gap-2 md:grid-cols-3"><input id="n" class="px-3 py-2 rounded-lg border" placeholder="Full name" required/><input id="e" type="email" class="px-3 py-2 rounded-lg border" placeholder="Email${s.enforce&&s.domain?` (@${s.domain})`:''}" required/><input id="cm" class="px-3 py-2 rounded-lg border md:col-span-3" placeholder="Optional comment"/><label class="text-xs opacity-80 md:col-span-3 flex items-center gap-2"><input id="ok" type="checkbox"/> I’m a real person signing once.</label><button class="md:col-span-3 px-3 py-2 rounded-lg text-white bg-[#005587]" type="submit">Add your signature</button></form><div id="sigs" class="grid gap-2"></div></div>`;show('detail');const canDel=(role()==='admin'||role()==='advisor');if(!canDel){$('#d-del')?.classList.add('hidden');}$('#d-del')?.addEventListener('click',()=>{if(!canDel)return toast('Only admin/advisor');if(confirm('Delete this petition?')){write(rows.filter(x=>x.id!==p.id));location.hash='#/';toast('Deleted')}});const wrap=$('#sigs');wrap.innerHTML=p.signatures.slice().reverse().map(s=>`<div class="text-sm bg-slate-50 border rounded-xl px-3 py-2 flex justify-between"><span class="font-medium">${s.name}</span><span class="opacity-70">${ago(s.ts)}</span></div>`).join('')||'<p class="text-sm opacity-70">No signatures yet.</p>';const u=getUser();if(u){$('#n').value=u.name||'';$('#e').value=u.email||''}$('#sign').onsubmit=ev=>{ev.preventDefault();const name=$('#n').value.trim(),email=$('#e').value.trim().toLowerCase(),comment=$('#cm').value.trim();if(!name||!email)return toast('Add name & email');if(!$('#ok').checked)return toast('Please confirm');if(s.enforce&&s.domain&&!email.endsWith('@'+s.domain))return toast('Email must be @'+s.domain);if(s.uniq&&p.signatures.some(x=>x.email.toLowerCase()===email))return toast('This email already signed');const i=rows.findIndex(x=>x.id===p.id);rows[i].signatures.push({id:uid(),name,email,comment,ts:Date.now()});write(rows);setUser({name,email});detail(p.id);toast('Signed!')}}function admin(){if(role()==='guest'){$('#m-admin').classList.remove('hidden');$('#m-admin').classList.add('flex')}$('#role-chip').textContent='Role: '+role();const tb=$('#tbl tbody');tb.innerHTML='';read().forEach(p=>{const tr=document.createElement('tr');tr.innerHTML=`<td class="py-2">${p.title}</td><td>${p.category}</td><td>${p.goal}</td><td>${p.signatures.length}</td><td>${p.status}</td><td>${p.featured?'Yes':'No'}</td><td><button class="px-2 py-1 rounded-lg border text-xs">Edit</button></td>`;tr.querySelector('button').onclick=()=>edit(p.id);tb.appendChild(tr)});const s=getSet();$('#s-domain').value=s.domain||'';$('#s-enforce').checked=!!s.enforce;$('#s-unique').checked=s.uniq!==false}function edit(id){const rows=read(),p=rows.find(x=>x.id===id);if(!p)return;$('#editor').classList.remove('hidden');$('#e-title').value=p.title;$('#e-cat').value=p.category;$('#e-goal').value=p.goal;$('#e-goal').disabled=role()!=='admin';$('#e-status').value=p.status;$('#e-desc').value=p.description;$('#e-resp').value=p.officialResponse||'';$('#e-featured').checked=!!p.featured;$('#e-save').onclick=()=>{if(role()==='guest')return toast('Log in first');p.title=$('#e-title').value.trim();p.category=$('#e-cat').value;p.goal=(role()==='admin')?Math.max(1,parseInt($('#e-goal').value,10)||50):50;p.status=$('#e-status').value;p.description=$('#e-desc').value.trim();if(role()!=='guest')p.officialResponse=$('#e-resp').value.trim();if(role()==='admin')p.featured=$('#e-featured').checked;write(rows);admin();toast('Saved')};$('#e-view').onclick=()=>location.hash='#/petition/'+p.id;$('#e-del').onclick=()=>{if(!(role()==='admin'||role()==='advisor'))return toast('Only admin/advisor');if(confirm('Delete this petition?')){write(rows.filter(x=>x.id!==p.id));$('#editor').classList.add('hidden');admin();home();toast('Deleted')}}}$('#admin-login').onclick=()=>{$('#m-admin').classList.remove('hidden');$('#m-admin').classList.add('flex')};$('#a-cancel').onclick=()=>$('#m-admin').classList.add('hidden');$('#a-ok').onclick=()=>{const r=$('#a-role').value,c=$('#a-code').value.trim();if((r==='admin'&&c==='thunderwolves')||(r==='advisor'&&c==='advisor')){setRole(r);toast('Logged in as '+r);$('#m-admin').classList.add('hidden');admin()}else toast('Incorrect passcode')};$('#admin-logout').onclick=()=>{setRole('guest');toast('Logged out');$('#role-chip').textContent='Role: guest'};$('#s-save').onclick=()=>{if(role()==='guest')return toast('Log in first');setSet({domain:$('#s-domain').value.trim(),enforce:$('#s-enforce').checked,uniq:$('#s-unique').checked});toast('Settings saved')};$('#s-reset').onclick=()=>{setSet({domain:'',enforce:false,uniq:true});admin();toast('Reset')};$('#btn-user').onclick=()=>{$('#m-user').classList.remove('hidden');$('#m-user').classList.add('flex');const u=getUser();$('#u-name').value=u?.name||'';$('#u-email').value=u?.email||'';$('#u-affil').checked=!!u?.affil};$('#u-cancel').onclick=()=>$('#m-user').classList.add('hidden');$('#u-save').onclick=()=>{const n=$('#u-name').value.trim(),e=$('#u-email').value.trim().toLowerCase();if(!n||!e)return toast('Enter name & email');setUser({name:n,email:e,affil:$('#u-affil').checked});toast('Saved');$('#m-user').classList.add('hidden');show('home')};window.addEventListener('hashchange',nav);document.getElementById('year').textContent=new Date().getFullYear();seed();nav();home();</script>
</body></html>
